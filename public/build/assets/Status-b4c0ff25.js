import{r as i,j as a,d as w}from"./app-4d736824.js";import{h as t}from"./moment-a9aaa855.js";import{M as j}from"./MainLayout-d5f21354.js";import{E as y}from"./ExpandedButton-97bd79aa.js";import{w as g}from"./tw-elements-react.es.min-46cdcb8d.js";import{T as N}from"./TECollapseItem-21cf381f.js";import"./momentCustomLocale-edb7a527.js";/* empty css             */import"./MainHeader-d58d9fcc.js";import"./ButtonHoverSlide-dff020f4.js";import"./react-responsive-1de32e52.js";import"./iconBase-42329843.js";import"./index-99e30f08.js";import"./index-2260efe8.js";import"./GoalsButton-a0996e7c.js";import"./goals-3-16b11df3.js";function V({auth:m,data:s,orderHistory:e,paymentMethod:r,paymentName:d,bankName:p}){const[u,x]=i.useState(t().hours(0).minutes(0).seconds(0)),v=Intl.NumberFormat("id-ID"),f=t(e.expiry_time),[l,b]=i.useState("pending");let h={desktop:["Buka aplikasi pembayaran pada smartphone Anda","Klik tombol untuk scan QR Code","Periksa detail pembayaran lalu tekan tombol bayar","Masukkan PIN/password Anda","Pembayaran selesai"],mobile:["Catat atau salin nomor Virtual Account yang Anda dapat",`Lakukan pembayaran melalui ATM ${r.name}, Internet Banking, atau Mobile Banking`,"Masukkan PIN Anda","Pilih 'Transfer ke Virtual Account'","Masukkan nomor Virtual Account yang Anda dapat","Saat pembayaran berhasil, Anda akan langsung diarahkan ke halaman Status Pembayaran"]};r.name.toLowerCase()=="gopay"?h={desktop:["Buka aplikasi Gojek dan klik “Bayar”","Scan Kode QR dari layar HP Anda","Klik “Konfirmasi & Bayar”","Masukkan PIN Anda","Pembayaran Anda Berhasil","Saat pembayaran berhasil, periksa status pembayaran Anda di halaman Status Pembayaran"],mobile:["Unduh Kode QR yang diberikan","Buka aplikasi GoPay","Klik tombol “Bayar”","Klik ikon gallery","Pilih Kode QR yang telah diunduh","Klik “Konfirmasi & Bayar”","Masukkan PIN Anda","Pembayaran Anda Berhasil","Saat pembayaran berhasil, periksa status pembayaran Anda di halaman Status Pembayaran"]}:r.name.toLowerCase()=="qris"&&(h={desktop:["Buka aplikasi pembayaran lalu klik “Bayar”","Scan Kode QRIS dari layar HP Anda","Klik “Konfirmasi & Bayar”","Masukkan PIN Anda","Pembayaran Anda Berhasil","Saat pembayaran berhasil, periksa status pembayaran Anda di halaman Status Pembayaran"],mobile:["Unduh Kode QRIS yang diberikan","Buka aplikasi pembayaran Anda","Klik tombol “Bayar”","Klik ikon gallery","Pilih Kode QRIS yang telah diunduh","Klik “Konfirmasi & Bayar”","Masukkan PIN Anda","Pembayaran Anda Berhasil","Saat pembayaran berhasil, periksa status pembayaran Anda di halaman Status Pembayaran"]});let o=i.useRef();const k=()=>{o.current=setInterval(()=>{fetch(`/api/check-payment-status/${s.order_code}`).then(n=>n.json()).then(n=>b(n.status.toLowerCase()));const c=f.diff(t());if(c<=1&&(clearInterval(o.current),x(t().hours(0).minutes(0).seconds(0)),location.href="/",alert("Waktu Pembayaran Telah Habis!")),l.toLowerCase()=="success")clearInterval(o.current),x(t().hours(0).minutes(0).seconds(0));else{const n=t();n.hours(Math.floor(c/(1e3*60*60))),n.minutes(Math.floor(c%(1e3*60*60)/(1e3*60))),n.seconds(Math.floor(c%(1e3*60*60)%(1e3*60)/1e3)),x(n)}},1e3)};return i.useEffect(()=>(k(),()=>{clearInterval(o.current)}),[]),a.jsx(j,{auth:m,title:"Purchase",children:a.jsx("section",{id:"purchase-form",className:"mb-16 xs:mb-20 md:mb-16 lg:mb-20 xl:mb-24 3xl:mb-32",children:a.jsxs("div",{className:"md:container mx-auto pt-[16vw] md:pt-[1vw] flex flex-col gap-[4vw] md:gap-[3vw] items-center text-[3.5vw] md:text-[1vw]",children:[a.jsx("div",{className:"w-full md:w-1/2 relative md:shadow-centered-spread md:rounded-[1vw] md:p-[1.5vw] h-fit overflow-hidden",children:a.jsxs("div",{className:"container md:w-full mx-auto flex flex-col items-center gap-[4vw] md:gap-[1vw] overflow-hidden",children:[a.jsxs("div",{className:`flex w-[200%] duration-1000 overflow-hidden ${l=="success"?"translate-x-1/4":"-translate-x-1/4"}`,children:[a.jsx("h5",{className:"w-1/2 text-center text-green-500 font-bold text-[4.5vw] md:text-[1.2vw]",children:"Pembayaran Berhasil"}),a.jsx("h5",{className:"w-1/2 text-center text-secondary font-bold text-[4.5vw] md:text-[1.2vw]",children:"Mari Selesaikan Pembayaranmu"})]}),a.jsx("hr",{className:`w-full duration-1000 ${l=="success"?"border-green-500":"border-secondary"}`}),a.jsxs("div",{className:`w-[200%] flex h-[88vw] md:h-[22vw] duration-1000 ${l=="success"?"translate-x-1/4":"-translate-x-1/4"}`,children:[a.jsx("div",{className:`w-full h-full flex justify-center items-center gap-[4vw] md:gap-[1vw] duration-1000 ${l=="success"?"scale-100":"scale-0"}`,children:a.jsx("svg",{className:"h-[60vw] md:h-[16vw] fill-green-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm-1.25 16.518l-4.5-4.319 1.396-1.435 3.078 2.937 6.105-6.218 1.421 1.409-7.5 7.626z"})})}),a.jsxs("div",{className:`w-full flex flex-col items-center gap-[4vw] md:gap-[1vw] duration-1000 ${l=="success"?"scale-0":"scale-100"}`,children:[a.jsx("div",{className:"w-full h-[56vw] md:h-[14vw] flex justify-center items-center",children:r.category!="bank_transfer"?a.jsx("img",{src:e.actions[0].url,className:"h-full",alt:""}):a.jsxs("div",{className:"text-center",children:[a.jsxs("h5",{className:"font-medium text-[4.5vw] md:text-[1.2vw]",children:["Nomor VA ",p," :"]}),a.jsx("h2",{className:"leading-loose cursor-pointer text-[6vw] md:text-[2.3vw]",onClick:()=>{navigator.clipboard.writeText(e.va_numbers[0].va_number),alert("Text copied!")},children:e.va_numbers?e.va_numbers[0].va_number:e.permata_va_number}),a.jsxs("p",{className:"font-medium hover:text-primary cursor-pointer",onClick:()=>{navigator.clipboard.writeText(e.va_numbers[0].va_number),alert("Text copied!")},children:[a.jsx("i",{className:"bi bi-copy"})," ","Salin"]})]})}),a.jsx("hr",{className:"w-full border-light-grey"}),a.jsx("table",{className:"w-10/12 md:w-full text-center font-poppins border-separate border-spacing-y-[2vw] md:border-spacing-0 my-[1vw] md:my-0",children:a.jsxs("tbody",{children:[a.jsxs("tr",{className:"font-bold text-[8vw] md:text-[3vw]",children:[a.jsx("td",{className:"w-3/12",children:u.format("HH")}),a.jsx("td",{children:":"}),a.jsx("td",{className:"w-3/12",children:u.format("mm")}),a.jsx("td",{children:":"}),a.jsx("td",{className:"w-3/12",children:u.format("ss")})]}),a.jsxs("tr",{className:"text-[3vw] md:text-[1vw]",children:[a.jsx("td",{children:"Jam"}),a.jsx("td",{}),a.jsx("td",{children:"Menit"}),a.jsx("td",{}),a.jsx("td",{children:"Detik"})]})]})})]})]}),a.jsx("hr",{className:"w-full border-dark"})]})}),a.jsx("div",{className:"w-full md:w-1/2 relative md:shadow-centered-spread md:rounded-[1vw] md:p-[1.5vw] h-fit",children:a.jsxs("div",{className:"container md:w-full mx-auto flex flex-col items-center gap-[4vw] md:gap-[1.5vw]",children:[a.jsx("hr",{className:"hidden md:block w-full border-light-grey"}),a.jsx("table",{className:"w-full font-poppins border-separate border-spacing-y-[4vw] md:border-spacing-y-[1.2vw] -my-[1vw] text-[3.25vw] md:text-[1vw]",children:a.jsxs("tbody",{children:[a.jsxs("tr",{children:[a.jsx("td",{children:"Metode Pembayaran"}),a.jsxs("td",{className:"flex justify-end items-center gap-[.8vw] font-semibold",children:[r.name," ",a.jsx("img",{className:"w-[10%]",src:`/img/purchase/${d}.png`,alt:""})]})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"ID Transaksi"}),a.jsx("td",{className:"flex justify-end text-end items-center font-semibold",children:s.order_code})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"Tanggal Transaksi"}),a.jsxs("td",{className:"flex justify-end text-end items-center font-semibold",children:[a.jsx("span",{className:"hidden md:inline-block",children:t(s.created_at).locale("id").format("dddd, DD MMMM YYYY")}),a.jsxs("span",{className:"md:hidden",children:[t(s.created_at).locale("id").format("dddd,"),a.jsx("br",{}),t(s.created_at).locale("id").format("DD MMMM YYYY")]})]})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"Total Pembelian"}),a.jsxs("td",{className:"flex justify-end text-end items-center font-semibold",children:["IDR"," ",v.format(e.gross_amount)]})]})]})}),a.jsx("hr",{className:"w-full border-light-grey"}),a.jsx(P,{steps:h}),a.jsxs("div",{className:"z-10 w-full overflow-hidden grid grid-cols-2 border-1 xl:border-2 border-primary font-poppins rounded-full",children:[a.jsx(w,{href:"/produk",className:"p-[2vw] md:p-[.6vw] font-medium text-center bg-white text-primary text-[3vw] md:text-[1vw]",children:"Belanja Lagi"}),a.jsx(w,{href:"#",className:"p-[2vw] md:p-[.6vw] font-medium text-center bg-primary text-white text-[3vw] md:text-[1vw]",children:"Cek Status Transaksi"})]})]})})]})})})}function P({steps:m}){const[s,e]=i.useState(!1);return a.jsxs("div",{className:"w-full block my-[2vw] md:my-0",children:[a.jsx(y,{textClassName:"font-medium text-dark",icon:`fa-solid fa-chevron-down duration-500 ${s?"-rotate-180":""}`,className:"h-[9vw] md:h-[3vw] border-1 border-dark",onClick:()=>e(!s),children:"Lihat Langkah Pembayaran"}),a.jsx(g,{show:s,className:"relative w-[110%] -ms-[5%] px-[4%] shadow-none -translate-y-[4vw] md:-translate-y-[1vw]",children:a.jsxs(N,{className:"grid gap-[4vw] md:gap-[1.2vw] px-[.3vw]",children:[a.jsxs("div",{className:"border-1 border-dark rounded-[1.5vw] md:rounded-[.6vw] p-[4vw] md:p-[1vw] flex flex-col gap-[1vw]",children:[a.jsx("p",{className:"font-bold",children:"1. Transaksi melalui Desktop"}),a.jsx("ul",{className:"list-disc ms-[6vw] md:ms-[2vw]",children:m.desktop.map((r,d)=>a.jsx("li",{children:r},d))})]}),a.jsxs("div",{className:"border-1 border-dark rounded-[1.5vw] md:rounded-[.6vw] p-[4vw] md:p-[1vw] flex flex-col gap-[1vw]",children:[a.jsx("p",{className:"font-bold",children:"2. Transaksi melalui Mobile"}),a.jsx("ul",{className:"list-disc ms-[6vw] md:ms-[2vw]",children:m.mobile.map((r,d)=>a.jsx("li",{children:r},d))})]})]})})]})}export{V as default};
